# Лабораторна робота №9 - Телефонна станція

## Варіант 9

База даних для телефонної станції з використанням Docker, PostgreSQL та Python.

## Структура проекту

```
├── docker-compose.yml    # Docker конфігурація (PostgreSQL + pgAdmin)
├── init_db.py           # Скрипт ініціалізації БД
├── main.py              # Головна програма з запитами
├── requirements.txt     # Залежності Python
├── .gitignore          # Файли для ігнорування Git
└── README.md           # Документація
```

## Предметна область

**Телефонна станція** - система обліку телефонних розмов клієнтів.

### Сутності:
- **Клієнти** (clients) - інформація про абонентів
- **Телефони** (phones) - номери телефонів клієнтів
- **Тарифи** (tariffs) - типи дзвінків та їх вартість
- **Розмови** (calls) - журнал телефонних розмов

## Вимоги

- Docker Desktop
- Python 3.8+
- pip

## Інструкція з запуску

### 1. Запуск контейнерів Docker

```bash
docker-compose up -d
```

Будуть запущені:
- **PostgreSQL** на порті `5432`
- **pgAdmin** на порті `5050`

### 2. Встановлення залежностей Python

```bash
pip install -r requirements.txt
```

### 3. Ініціалізація бази даних

Зачекайте 10-15 секунд після запуску контейнерів, потім:

```bash
python init_db.py
```

### 4. Запуск головної програми

```bash
python main.py
```

## Доступ до pgAdmin

1. Відкрийте браузер: http://localhost:5050
2. Увійдіть:
   - Email: `admin@admin.com`
   - Пароль: `admin123`
3. Додайте сервер:
   - Name: `Phone Station`
   - Host: `postgres` (для Docker мережі)
   - Port: `5432`
   - Database: `phone_station`
   - Username: `admin`
   - Password: `admin123`

**Примітка:** PostgreSQL доступний зовні на порті `5433` (localhost:5433)

## SQL Запити

Програма виконує наступні запити:

1. **Фізичні особи** - список клієнтів-фізичних осіб, відсортований за прізвищем
2. **Підрахунок за типом** - кількість клієнтів кожного типу
3. **Вартість розмов** - обчислення вартості кожної розмови
4. **Розмови за типом** - фільтрація за типом дзвінка (параметризований запит)
5. **Загальна вартість** - сума витрат кожного клієнта
6. **Перехресний запит** - кількість хвилин за типами дзвінків для кожного клієнта

## Зупинка контейнерів

```bash
docker-compose down
```

Для видалення даних:
```bash
docker-compose down -v
rm -rf postgres_data
```

## Автор

Лабораторна робота №9 - Бази даних
